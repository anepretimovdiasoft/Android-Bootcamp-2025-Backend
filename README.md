# Android-Bootcamp-2025-Backend

## Команда: The battle Capybaras

Разработать программный продукт для помощи в осуществлении волонтерской деятельности в клиент-серверной архитектуре.

Клиент - Android Приложение, реализованное на java или kotlin с адаптивной версткой.
Мобильное приложение должно предоставлять удобный и интуитивно понятный интерфейс для волонтеров, в котором можно зарегистрироваться в базу волонтеров, просмотреть ближайшие волонтерские центры, отредактировать собственный профиль и посмотреть активных волонтеров в конкретном центре. В случае авторизации с правами администратора, пользователь приложения должен иметь возможность просмотреть список не занятых волонтеров и их контактные данные.

Сервер - микросервис на Spring Boot, работающий с In-memory базой данных H2.
Серверное приложение должно предоставлять API необходимый для работы мобильного приложения. Осуществлять все основные манипуляции с данными в СУБД при помощи Spring Data JPA. Данные о всех зарегистрированных волонтерских центрах должны быть предзаполнены в БД при запуске приложения.Создание схемы БД и предзаполнение данными необходимо реализовать с использованием liquibase.



#### User story
1. Как пользователь, я могу зарегистрироваться в приложении чтобы числиться в базе данных волонтеров
2. Как пользователь, я могу авторизоваться, чтобы попасть в базу волонтеров.
3. Как пользователь, я могу изменить свой профиль, чтобы добавить туда свои данные и контактную информацию.
4. Как пользователь, я могу посмотреть список ближайших волонтерских центров.
5. Как пользователь, я могу посмотреть список активных волонтеров в конкретном центре.
6. Как администратор, я могу посмотреть список незанятых волонтеров.
7. Как администратор, я могу увидеть контактные данные конкретного волонтера.
8. Как администратор, я могу указать новый волонтерский центр
9. Как администратор, я могу назначить или снять с пользователя статус администратора
	
#### Use case
1. Цель: регистрация пользователя.
	Участники: волонтер.
	Предусловия: подключение к сети
	Основной поток: ввод e-mail и пароля. Отправка запроса на сервер, получение токена. Переход на экран входа.
	Альтернативный поток: указанная почта не является почтой(вместо vasyapupkin@gamil.com vasyapupkingmailcom), вывод сообщения об ошибке или ошибка подключения к интернету.
2. Цель: авторизация пользователя.
	Участники: волонтер.
	Предусловия: учетная запись создана.
	Основной поток: ввод e-mail и пароля. Отправка запроса на сервер, получение токена. Переход на главный экран.
	Альтернативный поток: неверные учетные данные, вывод сообщения об ошибке или ошибка подключения к интернету.
3. Цель: получение списка ближайших волонтерских центров.
	Участники: волонтер.
	Предусловия: учетная запись создана.
	Основной поток: переход на экран списка организаций. Отправка запроса на сервер, получение информации.
	Альтернативный поток: ошибка подключения к интернету
4. Цель: выбрать подходящий волонтёрский центр
	Участники: волонтер.
	Предусловия: учетная запись создана, информация о волонтерском центре загружена 
	Основной поток: переход на экран с информацией организации, отправка запроса на сервер, сохранение участника
	Альтернативный поток: выход с окна данной организации и просмотр иной или ошибка подключения к интернету
5. Цель: просмотреть личный профиль
	Участники: волонтер
	Предусловия: произведён вход в приложение.
	Основной поток: переход на экран профиля. Отправка запроса на сервер, получение информации о пользователе
	Альтернативный поток: ошибка подключения к интернету
6. Цель: изменение информации в профиле пользователя.
	Участники: волонтер
	Предусловия: учетная запись создана.
	Основной поток: переход на экран редактирования профиля. Отправка запроса на сервер, получение информации о пользователе. Ввод обновленной информации, отправка на сервер.
	Альтернативный поток: ошибка подключения к интернету
7. Цель: получение информации об участниках организации.
	Участники: волонтер
	Предусловия: учетная запись создана.
	Основной поток: переход на экран организации. Отправка запроса на сервер, получение информации об активных волонтерах.
	Альтернативный поток: ошибка подключения к интернету
7. Цель: получение списка волонтеров.
	Участники: администратор.
	Предусловия: учетная запись создана. Наличие прав администратора.
	Основной поток: переход на экран списка волонтеров. Отправка запроса на сервер, получение информации.
	Альтернативный поток: ошибка подключения к интернету
8. Цель: получение контактных данных пользователя.
	Участники: администратор.
	Предусловия: учетная запись создана. Наличие прав администратора.
	Основной поток: переход на экран учетной записи пользователя(волонтера). Отправка запроса на сервер, получение информации.
9. Цель: добавление нового волонтерского центра
	Участники: администратор 
	Предусловие: права администратора
	Основной поток: ввод данных волонтерского центра, отправка запроса о добавлении волонтерского центра, сохранение данных
	Альтернативный поток: отсутствие прав администратора, ошибка подключения к интернету, неверно введенные данные
10. Цель: выдать права администратора
	Участники: администратор
	Предусловие: права администратора
	Основной поток: администратор заходит в профиль пользователя, назначает его администратор, на сервер отправляется запрос о сохранении статуса администратора
	Альтернативный поток: нет прав администратора, ошибка подключения к интернету
11. Цель: снять права администратора
	Участники: администратор
	Предусловие: права администратора
	Основной поток: администратор заходит в профиль пользователя, снимает с него статус администратор, на сервер отправляется запрос о снятии статуса администратора
	Альтернативный поток: нет прав администратора, ошибка подключения к интернету





## Задачи для Backend разработчика

#### Регистрация пользователя в системе

1. [ ] API endpoint для регистрации
	- POST /api/1.0/volunteers/registration
	
2. [ ] Создать таблицу пользователей в БД

3. [ ] Создать реализацию добавления данных о пользователе в БД
	- Проверка на валидность данных (email, password)
	- Шифровка пароля (хеширование)

4. [ ] Обезопасить регистрацию
	- Проверка на SQL инъекцию
	- Проверка на XSS
	- Проверка на CSRF

5. [ ] Обработка ошибок при наличии
	- Указан существующий email
	- Указаны некорректные данные:
		- Неверный email
		- Ненадежный пароль
	- Внутренняя ошибка сервера
	- Возвращение ошибки в запросе


#### Авторизация пользователя в системе

1. [ ] API endpoint для входа
	- POST /api/1.0/volunteers/authorization
2. [ ] Реализовать базовую HTTP авторизацию

3. [ ] Обезопасить вход
	- Проверка на SQL инъекцию
	- Проверка на XSS
	- Проверка на CSRF

4. [ ] Обработка ошибок при наличии
	- Указан невалидный login/password
	- Внутренняя ошибка сервера
	- Возвращение ошибки в запросе
	

#### Получение списка ближайших волонтерских центров

1. [ ] API endpoint для получения списков
	- GET /api/1.0/centers/near

2. [ ] Создание таблицы в БД содержащей
	- Название
	- Адрес
	- Координаты (lat, lon)

3. [ ] Логика
	- Получение геоданных пользователя
		- POST /api/1.0/volunteers/geolocation
	- Расчёт ближайшего центра
		- Сортировка от меньшего расстояния к большему

4. [ ] Обработка ошибок при наличии
	- Нет геолокации пользователя
	- Внутренняя ошибка сервера
	- Возвращение ошибки в запросе

#### Просмотр личного кабинета (профиля) пользователя

1. [ ] API endpoint для отображения личных данных текущего пользователя
	- GET /api/1.0/volunteers/profile

2. [ ] Извлечении данных о пользователе из таблицы БД
	- ФИ
	- Телефон 
	- Почта
	- О себе

3. [ ] Защита личных данных
	- Доступ только авторизованным пользователям
	- Двухфакторная авторизация*

4. [ ] Обработка ошибок при наличии
	- Внутренняя ошибка
	- Возвращение ошибки в запросе
	
#### Редактирование личного кабинета (профиля) пользователя

1. [ ] API endpoint для редактирования персональных данных
	- PUT /api/1.0/volunteers/profile?id=

2. [ ] Обезопасить ввод
	- Проверка на SQL инъекцию
	- Проверка на XSS
	- Проверка на CSRF

3. [ ] Изменения данных в таблице БД

4. [ ] Обработка ошибок при наличии
	- Короткий пароль
	- Некорректные данные
	- Внутренняя ошибка
	- Возвращение ошибки в запросе

#### Получение информации об участниках организации

1. [ ] API endpoint для получения информации об участниках организации
	- GET /api/1.0/centers/{centerId}/members

2. [ ] Логика
	- Получение данных о волонтёрах
		- ФИ

3. [ ] Добавить данные об участии волонтера в таблице БД

4. [ ] Обработка ошибок при наличии
	- Несуществующий центр
	- Внутренняя ошибка
	- Возвращение ошибки в запросе

#### Получение списка волонтеров (требуются права администратора)

1. [ ] API endpoint для получения списка свободных волонтеров
	- GET /api/1.0/volunteers/free

2. [ ] Добавить колонку в таблицу БД со статусом занятости

3. [ ] Логика
	- Проверять статус пользователя (волонтера)
		- При занятом статусе указывать центр
		- При свободном статусе возвращать

4. [ ] Обработка ошибок при наличии
	- Недостаточно прав для совершения действия
	- Внутренняя ошибка
	- Возвращение ошибки в запросе
	
#### Получение контактных данных пользователям (требуются права администратора)

1. [ ] API endpoint для получения контактных данных
	- GET /api/1.0/volunteers/profile?id=
	
2. [ ] Извлечение информации из таблицы БД

3. [ ] Обработка ошибок при наличии
	- Недостаточно прав для совершения действия
	- Внутренняя ошибка
	- Возвращение ошибки в запросе


#### Добавление нового волонтерского центра (требуются права администратора)

1. [ ] API endpoint для добавления нового центра
	- POST /api/1.0/centers/create

2. [ ] Добавление информации в таблицу БД с центрами

3. [ ] Обезопасить ввод
	- Проверка на SQL инъекцию
	- Проверка на XSS
	- Проверка на CSRF

4. [ ] Обработка ошибок при наличии
	- Недостаточно прав для совершения действия
	- Указаны некорректные данные
	- Внутренняя ошибка
	- Возвращение ошибки в запросе
	
#### Назначение нового администратора (требуются права администратора)

1. [ ] API endpoint для добавления нового центра
	- PUT /api/1.0/volunteers/update-role

2. [ ] Добавление информации в таблицу БД с данными об администраторах

4. [ ] Обработка ошибок при наличии
	- Недостаточно прав для совершения действия
	- Некорректный пользователь
	- Внутренняя ошибка
	- Возвращение ошибки в запросе

#### Снятие прав администратора (требуются права администратора)

1. [ ] API endpoint для добавления нового центра
	- DELETE /api/1.0/volunteers/update-role

2. [ ] Удаление информации в таблице БД с данными об администраторах

4. [ ] Обработка ошибок при наличии
	- Недостаточно прав для совершения действия
	- Некорректный пользователь
	- Внутренняя ошибка
	- Возвращение ошибки в запросе
	
	
	
#### Ссылка на бд
	https://app.quickdatabasediagrams.com/#/d/nvBwOK